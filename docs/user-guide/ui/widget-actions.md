---
layout: docwithnav
assignees:
- ashvayka
title: Widgets Actions
description: ThingsBoard Dashboard Widgets Actions
entity-sources:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-sources.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-sources-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-sources-2.png

entity-cellbutton:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-4.png
    5:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-5.png

entity-widgetheaderbutton:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-4.png
    5:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-5.png

entity-onrowclick:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-4.png

entity-onrowdoubleclick:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-4.png

onnode:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onnode.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onnode-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onnode-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onnode-3.png

onhtml:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-3.png

onhtml-title:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-title.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/onhtml-takeaction.png

navigate-new-state-cards:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-4.png
    5:
        image: /images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-5.png
    6:
        image: /images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-6.png

update-current-dash-state:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-1.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-2.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-3.png
    5:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-4.png
    6:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-5.png
    7:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-6.png
    8:
        image: /images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-7.png

navigate-to-dash-cards:
    0:
        image: /images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash.png
    1:
        image: /images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-4.png

custom-action:
    0:
        image: /images/user-guide/ui/widgets/actions/custom-action.png
    1:
        image: /images/user-guide/ui/widgets/actions/custom-action-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/custom-action-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/custom-action-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/custom-action-4.png
    5:
        image: /images/user-guide/ui/widgets/actions/custom-action-5.png
    6:
        image: /images/user-guide/ui/widgets/actions/custom-action-6.png

custom-action-html:
    0:
        image: /images/user-guide/ui/widgets/actions/custom-action-html.png
    1: 
        image: /images/user-guide/ui/widgets/actions/custom-action-html-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-4.png
    5:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-5.png
    6:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-6.png
    7:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-7.png
    8:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-8.png
    9:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-9.png
    10:
        image: /images/user-guide/ui/widgets/actions/custom-action-html-10.png

chart-editmode:
    0:
        image: /images/user-guide/ui/widgets/actions/charts/chart-editmode.png
    1:
        image: /images/user-guide/ui/widgets/actions/charts/chart-editmode-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/charts/chart-editmode-2.png

charts-source-whb:
    0:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb.png
    1:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb-4.png
    5:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb-5.png
    6:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb-6.png
    7:
        image: /images/user-guide/ui/widgets/actions/charts/charts-source-whb-7.png

map-creation:
    0:
        image: /images/user-guide/ui/widgets/actions/maps/to-create-a-map.png
    1:
        image: /images/user-guide/ui/widgets/actions/maps/to-create-a-map-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/maps/to-create-a-map-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/maps/to-create-a-map-3.png  
    4:
        image: /images/user-guide/ui/widgets/actions/maps/to-create-a-map-4.png

map-polygon:
    0:
        image: /images/user-guide/ui/widgets/actions/maps/polygon.png
    1:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-4.png
    5:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-5.png
    6:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-6.png
    7:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-7.png
    8:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-8.png
    9:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-9.png
    10:
        image: /images/user-guide/ui/widgets/actions/maps/polygon-10.png
  
navigate-to-actions-map:
    0:
        image: /images/user-guide/ui/widgets/actions/maps/navigate-to-actions.png
    1:
        image: /images/user-guide/ui/widgets/actions/maps/navigate-to-actions-1.png

whb-map:
    0:
        image: /images/user-guide/ui/widgets/actions/maps/whb-map.png
    1:
        image: /images/user-guide/ui/widgets/actions/maps/whb-map-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/maps/whb-map-2.png

omc-map:
    0:
        image: /images/user-guide/ui/widgets/actions/maps/omc-map.png
    1:
        image: /images/user-guide/ui/widgets/actions/maps/omc-map-1.png

tooltiptag:
    0:
        image: /images/user-guide/ui/widgets/actions/maps/tooltiptag.png
    1:
        image: /images/user-guide/ui/widgets/actions/maps/tooltiptag-1.png
    2:
        image: /images/user-guide/ui/widgets/actions/maps/tooltiptag-2.png
    3:
        image: /images/user-guide/ui/widgets/actions/maps/tooltiptag-3.png
    4:
        image: /images/user-guide/ui/widgets/actions/maps/tooltiptag-4.png

mob:
    0:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout.png
    1:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-1.png

mob-layout-1:
    1: 
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-2.png
    2:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-3.png
    3:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-4.png
    4:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-5.png
    5:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-6.png

mob-layout-2:
    1:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-7.png
    2:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-8.png
    3:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-9.png
    4:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-10.png
    5:
        image: /images/user-guide/ui/widgets/actions/settings/mob-layout-11.png

---

* TOC
{:toc}

## Introduction

Actions feature can be treated as navigation among [dashboard's states](/docs/user-guide/dashboards/#states) or between different [dashboards](/docs/user-guide/dashboards/).
Actions allow quickly and easily configuring the transition to created state, transferring to other dashboards, or even updating the dashboard you are in. 
Depending on the widget, the action sources differ. However, the type of action you are able to choose will be the same for all widgets.

Actions are adjusted in the Edit mode of the needed widget.

To fully understand how to use Actions, you have to add a State to your widget. How to do this you should [read here](/docs/user-guide/dashboards/#states).

## Action types

_Types of action_ define which exactly action will be taken.
There are five action types that are the same for all widgets.
Learn how to configure action types with the example on [Entity Cards widget](/docs/user-guide/ui/widget-actions/#action-types-configuration) examples.

## Action types configuration

Since the action types are the same for all widgets, in this tutorial will be used the [Action Cell Button action source](/docs/user-guide/ui/widget-actions/#1-action-cell-button) to explain all action types,
and they will be explained using the Entity Cards widget examples.

##### Navigate to new dashboard state

States are so-called levels that allow you to navigate between different devices, assets, and widget objects to see the information you need in more detail.
When choosing the _Navigate to new dashboard state_ action type, you will be transferred to the previously created state of your choice.
How to add states to your dashboard, please [read here](/docs/user-guide/dashboards/#states).

After a state has been added, we can configure a _Navigate to new dashboard state_ action type:

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. As an example for this manual, in the top drop-down menu, choose an "Action cell button" action source.
4. In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.
5. In the drop-down menu "Type", choose a _Navigate to new dashboard state_ action type.
6. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
7. When the desired state has been selected, click the "Add" button at the bottom of the "Add action" window.
8. Now you see configured action, so you can double-check action source, icon, and action type.
9. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
10. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

After saving changes, you can see an icon-button opposite the entity names. Clicking any of these icons will bring you to the previously selected state.

{% include images-gallery.html imageCollection="navigate-new-state-cards" %}

##### Update current dashboard state

This action type allows updating a dashboard that you are currently on.
While using a dashboard, you can view detailed information about a specific device/asset in real-time.
The most common use of this action type is through Chart widgets where you can see the details more accurately.
For starters let's add a Chart widget to the Dashboard to configure the _Update current dashboard state_ action type:

1. Enter Dashboard's Edit mode and in the drop-down "Select widget" menu choose Charts: Timeseries - Flot.
2. In the "Add widget" window type input your data source, in this manual for example is used pressure data. Click "Add" at the right bottom of the widget.
3. We can see that the Chart widget has appeared on the dashboard, but it has no data to display yet.
4. Enter Edit mode of the Table widget by clicking the Pencil icon on the right top of the widget.
5. In the widget's edit mode move to the last cell "Actions".
6. Click the "+" icon on the right of the window to add a new action.
7. As an example for this manual, in the top drop-down menu, choose an "Action cell button" action source.
8. In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.
9. In the drop-down menu "Type", choose an _Update current dashboard state_ action type.
10. After choosing an action type, click "Add" at the right bottom of the "Add action" window.
11. Now you see configured action, so you can double-check action source, icon, and action type.
12. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
13. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

After saving changes, you will see button icons opposite the entity names. Clicking on any of these icons will update the entity details and they will be shown on the Chart widget on the current dashboard.

{% include images-gallery.html imageCollection="update-current-dash-state" %}

##### Navigate to other dashboard

This type of action transfers you to a previously created dashboard of your choice.
To be fastly transitioned to another selected dashboard, you should:

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. As an example for this manual, in the top drop-down menu, choose an "Action cell button" action source.
4. In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.
5. In the drop-down menu "Type", choose a _Navigate to other dashboard_ action type.
6. After choosing an action type, the drop-down menu "Target dashboard" appears. Select a previously created dashboard you'd like to be transitioned to.
   Notice that it's also possible to be transitioned to the existed state in the chosen dashboard.
7. After configuring an action type, click "Add" at the right bottom of the "Add action" window.
8. Now you see configured action, so you can double-check action source, icon, and action type.
9. Apply changes by clicking the orange tick icon in the top right of the window, and then close the details window.
10. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

After saving changes, you can see icon-buttons opposite the entity names. Clicking any of these icons will transfer you to the previously selected dashboard (or chosen state in that dashboard).

{% include images-gallery.html imageCollection="navigate-to-dash-cards" %}

##### Custom action

A Custom action allows manually configuring a function that can be used to add an individual action to your widget (for example deleting listed devices/assets).
To configure a custom action with a function (with an example of an asset deletion):

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. As an example for this manual, in the top drop-down menu, choose an "Action cell button" action source.
4. In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.
5. In the drop-down menu "Type", choose a _Custom action_ action type.
6. After choosing a Custom action type, a field for inputting a function will appear.
7. Enter your custom function there. An example in this tutorial is an Asset deletion action that adds the ability to delete assets right from the table
   (you can find an example of the function under the screenshots section).
8. Apply changes by clicking the "Save" button at the right bottom of the "Edit action" window.
9. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
10. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

Execute an action by clicking the "trash box" icon opposite entity names.

{% include images-gallery.html imageCollection="custom-action" %}

An example of the function for an asset deletion:

```ruby
{
    let $injector = widgetContext.$scope.$injector;
    let dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));
    let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));

    openDeleteAssetDialog();

    function openDeleteAssetDialog() {
        let title = "Are you sure you want to delete the asset " + entityName + "?";
        let content = "Be careful, after the confirmation, the asset and all related data will become unrecoverable!";
        dialogs.confirm(title, content, 'Cancel', 'Delete').subscribe(
            function(result) {
                if (result) {
                    deleteAsset();
                }
            }
        );
    }

    function deleteAsset() {
        assetService.deleteAsset(entityId.id).subscribe(
            function() {
                widgetContext.updateAliases();
            }
        );
    }
}
```

##### Custom action (with HTML template)

A Custom action with an HTML template allows manually entering a function in an existing HTML template (for example creating dialog windows and opportunity to edit listed devices/assets).

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. As an example for this manual, in the top drop-down menu, choose an "Action cell button" action source.
4. In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.
5. In the drop-down menu "Type", choose a _Custom action(with HTML template)_ action type.
6. After choosing a Custom action type, a field with a ready template for inputting a function will appear.
7. Enter your custom function there. Examples in this tutorial are two custom functions. One that adds a dialog window to fill in and another that adds a possibility to edit assets.
   (you can find an example of the function under the screenshots section).
8. Apply changes by clicking the "Save" button at the right bottom of the "Edit action" window.
9. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
10. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

Execute actions by clicking appropriate icons.

{% include images-gallery.html imageCollection="custom-action-html" %}

An example of the function that adds a dialog window to fill in:

```ruby
let $injector = widgetContext.$scope.$injector;
let customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));
let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));
let attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));

openAddAssetDialog();

function openAddAssetDialog() {
    customDialog.customDialog(htmlTemplate, AddAssetDialogController).subscribe();
}

function AddAssetDialogController(instance) {
    let vm = instance;
    
    vm.addAssetFormGroup = vm.fb.group({
      assetName: ['', [vm.validators.required]],
      assetType: ['', [vm.validators.required]],
      assetLabel: [''],
      attributes: vm.fb.group({
          latitude: [null],
          longitude: [null]
      })      
    });
    
    vm.cancel = function() {
        vm.dialogRef.close(null);
    };
    
    vm.save = function() {
        vm.addAssetFormGroup.markAsPristine();
        let asset = {
            name: vm.addAssetFormGroup.get('assetName').value,
            type: vm.addAssetFormGroup.get('assetType').value,
            label: vm.addAssetFormGroup.get('assetLabel').value
        };
        assetService.saveAsset(asset).subscribe(
            function (asset) {
                saveAttributes(asset.id).subscribe(
                    function () {
                        widgetContext.updateAliases();
                        vm.dialogRef.close(null);
                    }
                );
            }
        );
    };
    
    function saveAttributes(entityId) {
        let attributes = vm.addAssetFormGroup.get('attributes').value;
        let attributesArray = [];
        for (let key in attributes) {
            attributesArray.push({key: key, value: attributes[key]});
        }
        if (attributesArray.length > 0) {
            return attributeService.saveEntityAttributes(entityId, "SERVER_SCOPE", attributesArray);
        } else {
            return widgetContext.rxjs.of([]);
        }
    }
}
```

An example of a function that adds a possibility to edit assets:

```ruby
let $injector = widgetContext.$scope.$injector;
let customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));
let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));
let attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));

openEditAssetDialog();

function openEditAssetDialog() {
    customDialog.customDialog(htmlTemplate, EditAssetDialogController).subscribe();
}

function EditAssetDialogController(instance) {
    let vm = instance;
    
    vm.asset = null;
    vm.attributes = {};
    
    vm.editAssetFormGroup = vm.fb.group({
      assetName: ['', [vm.validators.required]],
      assetType: ['', [vm.validators.required]],
      assetLabel: [''],
      attributes: vm.fb.group({
          latitude: [null],
          longitude: [null]
      })      
    });
    
    vm.cancel = function() {
        vm.dialogRef.close(null);
    };
    
    vm.save = function() {
        vm.editAssetFormGroup.markAsPristine();
        vm.asset.name = vm.editAssetFormGroup.get('assetName').value,
        vm.asset.type = vm.editAssetFormGroup.get('assetType').value,
        vm.asset.label = vm.editAssetFormGroup.get('assetLabel').value
        assetService.saveAsset(vm.asset).subscribe(
            function () {
                saveAttributes().subscribe(
                    function () {
                        widgetContext.updateAliases();
                        vm.dialogRef.close(null);
                    }
                );
            }
        );
    };
    
    getEntityInfo();
    
    function getEntityInfo() {
        assetService.getAsset(entityId.id).subscribe(
            function (asset) {
                attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE',
                                                    ['latitude', 'longitude']).subscribe(
                   function (attributes) {
                        for (let i = 0; i < attributes.length; i++) {
                            vm.attributes[attributes[i].key] = attributes[i].value; 
                        }
                        vm.asset = asset;
                        vm.editAssetFormGroup.patchValue(
                            {
                                assetName: vm.asset.name,
                                assetType: vm.asset.type,
                                assetLabel: vm.asset.label,
                                attributes: {
                                    latitude: vm.attributes.latitude,
                                    longitude: vm.attributes.longitude
                                }
                            }, {emitEvent: false}
                        );
                   } 
                );
            }
        );    
    }
    
    function saveAttributes() {
        let attributes = vm.editAssetFormGroup.get('attributes').value;
        let attributesArray = [];
        for (let key in attributes) {
            attributesArray.push({key: key, value: attributes[key]});
        }
        if (attributesArray.length > 0) {
            return attributeService.saveEntityAttributes(entityId, 'SERVER_SCOPE', attributesArray);
        } else {
            return widgetContext.rxjs.of([]);
        }
    }
}
```

## Action sources 

_Actions sources_ is a specific act that needs to be done to achieve a goal (like clicking a widget header button, double-clicking a row, or a map's marker). Action sources are different for all widgets. 
Action sources will be explained for each widget type separately using an example of the most commonly used type of action "Navigate to new dashboard state". 

**All of the action sources will be shown with an example of ["Navigate to new dashboard state"](/docs/user-guide/ui/widget-actions/#navigate-to-new-dashboard-state) action type.**

#### Action sources configuration

For suitability, we consider action sources on the most commonly used widgets.

Please, [learn here](/docs/getting-started-guides/helloworld/#step-33-add-table-widget) how to add an Entity Table widget to your dashboard. 

To add an action to your Entity Table widget: 
- Go to the Dashboard's edit mode;
- Click a "Pencil" icon in the upper right corner of the widget;
- Choose the last cell "Actions" and click the "Plus" symbol on the right of the window.

{% include images-gallery.html imageCollection="entity-sources" %}

###### 1. Action cell button
  
Clicking an icon that's been chosen as a button executes an action. To configure the _Action cell button_ action source, you should:

1. In the widget's edit mode move to the last cell "Actions".  
2. Click the "+" icon on the right of the window to add a new action.  
3. In the top drop-down menu, choose an _Action cell button_ action source.  
4. In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.  
5. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.  
6. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to. 
7. When all needed settings are configured, click "Add" at the right bottom of the "Add action" window.  
8. Now you see configured action, so you can double-check action source, icon, and action type.
9. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window. 
10. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

As you see, opposite each entity name is an action cell button. By clicking this button the action will be executed, namely transition to the chosen state.

{% include images-gallery.html imageCollection="entity-cellbutton" %}

###### 2. Widget header button 
  
A button appears in the header of the widget. Clicking this button executes an action. This button responsible for the whole widget, not for separate entities. 
The widget header button is the most commonly used action source, and it can be found in all widgets. To configure the _Widget header button_ action source, you should:

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. In the top drop-down menu, choose a _Widget header button_ action source.
4. In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.
5. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
6. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
7. When all needed settings are configured, click "Add" at the right bottom of the "Add action" window.
8. Now you see configured action, so you can double-check action source, icon, and action type.
9. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
10. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

As you see now, in the header of the widget has appeared a button-icon. After you click it, action will be performed, namely, the transition to the chosen state.

{% include images-gallery.html imageCollection="entity-widgetheaderbutton" %}

###### 3. On row click 
  
Clicking on the row of the Table widget executes an action. To configure the _On row click_ action source, you should:

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. In the top drop-down menu, choose an _On row click_ action source.
4. Enter the name of the action in the appropriate line.
5. Using this action source, there won't be any buttons on the widget, therefore we shouldn't select an icon.
6. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
7. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
8. When all needed settings are configured, click "Add" at the right bottom of the "Add action" window.
9. Now, you see configured action, so you can double-check action source and action type.
10. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
11. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

To execute an action, namely to be transitioned to the chosen state, just click any of the rows of your Table widget.

{% include images-gallery.html imageCollection="entity-onrowclick" %}

###### 4. On row double click 
  
Double-clicking any row of the Entity table widget executes an action. To configure the _On row double click_ action source, you should:

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. In the top drop-down menu, choose an _On row double click_ action source.
4. Enter the name of the action in the appropriate line.
5. Using this action source, there won't be any buttons on the widget, therefore we shouldn't select an icon.
6. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
7. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
8. When all needed settings are configured, click "Add" at the right bottom of the "Add action" window.
9. Now, you see configured action, so you can double-check action source and action type.
10. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
11. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

To execute an action, namely to be transitioned to the chosen state, just double click any of the rows of your Table widget.

{% include images-gallery.html imageCollection="entity-onrowdoubleclick" %}

###### 5. On node selected (only in Entities Hierarchy widget)

When the Entities Hierarchy widget was added, you should configure a hierarchy itself. How to do it, please, [learn here](/docs/user-guide/entities-and-relations/#step-1-provision-entities-and-relations). 
After relations were added, go to the edit mode of the Entities Hierarchy widget. To configure the _On node selected_ action source:

1. In the widget's edit mode move to the last cell called "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. In the top drop-down menu, choose an _On node selected_ action source.
4. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
5. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
6. After configuring all needed settings, click "Add" at the right bottom of the "Add action" window.
7. Now you see configured action, so you can double-check action source and action type.
8. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
9. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

To perform an action you should click any of the nodes in the Entities hierarchy. 

{% include images-gallery.html imageCollection="onnode" %}

###### 6. On HTML element click (only in HTML Cards and Value Title widgets)

ThingsBoard has two widgets that you can configure fully by yourself by customizing an HTML code in their settings. When a code is written, it is possible to input an action source in it.  
How to add an action source to HTML Cards and Value Title widgets:

- **HTML Cards widget**

    1. In the widget's edit mode move to the last cell called "Actions".
    2. Click the "+" icon on the right of the window to add a new action.
    3. In the top drop-down menu, choose an _On HTML element click_ action source.
    4. Input the name of the action and be sure to remember it, because the action name will be used while configuring the HTML code.
    5. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
    6. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
    7. After configuring all needed settings, click "Add" at the right bottom of the "Add action" window.
    8. Now you see configured action, so you can double-check action source and action type.
    9. Now move to the Advanced cell of the widget. There you should see two fields: CSS and HTML.
    10. In the HTML field enter an ID of the action which is its name. Since the name in the example is _test1_, the HTML code will look like this:

```ruby
<div id='test1' class='card'>HTML code here</div>
```

- Where _test1_ is the name of the action and _HTML code here_ is the text which is going to be shown on the HTML Card widget

Then apply changes by clicking the orange tick icon in the top right of the window and then close the details window.  
In the edit mode of the dashboard save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

To execute an action click anywhere in the widget. 

{% include images-gallery.html imageCollection="onhtml" %}

- **Value Title widget**

    1. In the widget's edit mode, move to the last cell called "Actions".
    2. Click the "+" icon on the right of the window to add a new action.
    3. In the top drop-down menu, choose an _On HTML element click_ action source.
    4. Input the name of the action and be sure to remember it, because the action name will be used while configuring the HTML code.
    5. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
    6. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
    7. After configuring all needed settings, click "Add" at the right bottom of the "Add action" window.
    8. Now you see configured action, so you can double-check action source and action type.
    9. Now move to the Advanced cell of the widget. There you should see two fields with already written code: CSS and HTML.
    10. For example let's configure an action that executes by clicking the widget's header. In the HTML field find a header tag and enter an ID of your action there. 
        Since the name in the example is _test2_, the HTML code will look like this:

```ruby
<h1 id='test2'>Value title</h1>
```

- Where _test2_ is the name of the action and _Value title_ is the text that will be shown in the widget's header.

Then apply changes by clicking the orange tick icon in the top right of the window and then close the details window.  
In the edit mode of the dashboard save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

To execute an action click the widget's header.

{% include images-gallery.html imageCollection="onhtml-title" %}

#### Map widget action sources

Map widget has unique action sources that need to be considered separately. 

Let's start by adding a Map widget. Go to the dashboard where your Map will be placed and click a bottom right "Pencil" icon:
- **If you have an empty new dashboard**, you need to just click the message in the middle "Add a new widget" and in the drop-down menu at the end of the list, choose "Maps". 
  Then, add a Datasource of your widget and click "Add".
- **If some widgets were added before to this dashboard**, click the "Paper" icon ("Create new widget"). 
In the drop-down menu list to the end of the list to choose "Maps". Finally, add a Datasource of your widget and click "Add".

{% include images-gallery.html imageCollection="map-creation" %}

- Adding an action to the Map widget

Now it's time to add an action. To do this you should click the "Pencil" icon on the right top of the Map widget to enter the "Edit widget" mode.
Navigate to the "Action" cell and there click the "+" icon in the right of the screen. The "Add action" window will be opened.

{% include images-gallery.html imageCollection="navigate-to-actions-map" %}

**Please note**: all actions explanations assume that you have already added states to your widget. If not, please do so. How to do it [read here](/docs/user-guide/dashboards/#states).

##### 1. On marker click
  
Action will be executed by clicking on the red map's marker. 

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. In the top drop-down menu, choose an _On marker click_ action source. 
4. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
5. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
6. When all needed settings are configured, click "Add" at the right bottom of the "Add action" window.
7. Now you see configured action, so you can double-check action source, icon, and action type.
8. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
9. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

{% include images-gallery.html imageCollection="omc-map" %}

##### 2. On polygon click

Polygon is a plane figure that’s described by a finite number of dots. We use polygon which is based on coordinates that are specified within the device we use, but you can use any other entity.
You may mark your assets and any other entities with a polygon option. For the polygon, we can specify the next settings. Polygon coordinates are being received in a format:

```ruby
[[1CoordinateLatitude,1CoordinateLatitude],[2CoordinateLatitude,2CoordinateLatitude]...[nCoordinateLatitude,nCoordinateLatitude]]
```

where n - number of coordinates which polygon is described by.

To configure _On polygon click_ action source on the Map widget, you should:

1. In the widget's edit mode move to the cell "Advanced".
2. Scroll to the Polygon Settings, tick the checkbox "Show polygon".
3. Input Polygon key name and remember it, it's going to be used later.
4. Click an orange tick mark on the right top of the window to apply changes.
5. Click the right bottom tick icon to save the changes.
6. With the main left ThingsBoard menu go to Assets.
7. From the assets list select an asset you'd like to add a polygon to and open it.
8. In the Assets details window, go to the Attributes cell.
9. Click the "+" icon to add a new attribute to the asset.
10. In the "Add attribute" window enter a Key - it must be the same Key as the Polygon key name.
11. Select Value Type "Strings" and input coordinates of the massive for your polygon. In the example, we use random coordinates
```
[[37.758436,  -122.509429],[37.759834, -122.476874],[37.734690, -122.475170],[37.733531, -122.506271]]
```
12. In the "Add attribute" window click the right bottom button "Add".
13. Go back to the Dashboard with the Map widget.
14. Enter Dashboard's edit mode by clicking the bottom right "Pencil" icon.
15. Click the "pencil" icon on the right top corner of the Map widget to enter its edit mode.
16. Add in the Datasources a data key that has just been configured. Just start typing its name and it will be shown in the list.
17. After adding a new data key, apply changes.
18. Move to the last cell "Actions".
19. Click the "+" icon on the right of the window to add a new action.
20. In the top drop-down menu, choose an _On polygon click_ action source.
21. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu. 
22. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
23. When all needed settings are configured, click "Add" at the right bottom of the "Add action" window.
24. Now you see configured action, so you can double-check action source and action type.
25. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
26. Save applied changes by clicking the orange tick icon "Apply changes" in the bottom right of the screen.

To execute an action click anywhere inside the polygon.

{% include images-gallery.html imageCollection="map-polygon" %}
  
##### 3. Tooltip tag action
  
When clicking a map's marker, a tooltip will appear. A tooltip contains a link that executes an action.  
Please note, in this manual explained a basic way to use the tooltip tag action source. It is possible to configure several links for various devices/assets that return different values. 
Do it with the tooltip function in the advanced mode of the map widget.

To configure the Tooltip tag action of the Map widget, you should:

1. In the widget's edit mode move to the last cell "Actions".
2. Click the "+" icon on the right of the window to add a new action.
3. In the top drop-down menu, choose an _On marker click_ action source.
4. Enter a name for the action and make sure to remember it, it's going to be used later.
5. Since the example for all the action sources is the "Navigate to new dashboard state" action type, choose it in the drop-down Type menu.
6. After choosing an action type, the drop-down menu "Target dashboard state" appears. Select a previously created state you'd like to be transitioned to.
7. When all needed settings are configured, click "Add" at the right bottom of the "Add action" window.
8. Now you see configured action, so you can double-check action source, icon, and action type.
9. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
10. Move to the Advanced settings cell.
11. Scroll down to the Tooltip configuration and tick the checkbox "Show tooltip".
12. In the Tooltip line find _link-act name_ and input there the action name in a format:

```
<link-act name='TooltipTag'>Navigate to the Compressor</link-act>
```

where _TooltipTag_ is an action name and _Navigate to the Compressor_ is the text that will be shown as a link on a tooltip.

13. Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.
14. Save applied changes by clicking the orange at the right bottom of the screen.

Click a map's marker for a tooltip to appear. To execute an action, click the text of the link at the bottom of the tooltip.

{% include images-gallery.html imageCollection="tooltiptag" %}

## Special actions settings

#### Open right dashboard layout (mobile view)

Often users need to see updated details of one widget on another widget near it. For example, we have a list of assets in Entity Table widget, and we want to update their details on the Chart widget near.
From the desktop, it’s easily configuring by placing two widgets near each other and choosing an "Update current dashboard" action type, however an adaptive mobile screen automatically places widgets under each other,
so you need to scroll down to see needed information on the second one.

{% include images-gallery.html imageCollection="mob" %}

[Layouts](/docs/user-guide/dashboards/#layouts) feature solves this issue. To configure layouts and move already created widgets, you should:
1. Enter the Dashboard's edit mode by clicking a "Pencil" icon at the right bottom of the page.
2. On the left top of the window click "Manage layouts".
3. In the opened "Manage layouts" window, tick the checkbox "Right" and click "Save". Now we have two layouts.
4. Then, we need to transfer the Chart widget to the right layout. Right-click widget and from the appeared menu choose "Copy".
5. Right-click anywhere on the empty layout and from the appeared menu choose "Paste".
6. When we have two copies of the same widget on both layouts, let's delete the one on the main layout by right-clicking it and choosing "Delete" in the appeared menu.
   In the opened dialog confirmation window click "Yes" and the widget will be deleted.
7. Adjust widgets' size by dragging their edges.

{% include images-gallery.html imageCollection="mob-layout-1" %}

Now, to activate an action that allows seeing details of one widget on another one with the one button click and no more movements, you need:

1. Enter Edit mode of the widget on the main layout by clicking the "Pencil" icon on the right top of the widget.
2. Go to the "Actions" cell and click the "+" icon to add a new action.
3. Choose the desired action source, in the example, it is going to be the Action cell button.
Give a name for the action, it is going to be visible in the mobile mode. Select an icon representing a button (if needed) by clicking an icon image and choosing from the variety of icons.
4. Select an action type "Update current dashboard state". Select a target dashboard state - it should be the dashboard state where layouts were created.
5. Finally, tick a checkbox "Open right dashboard layout (mobile view)".
6. Click "Save" at the right bottom of the dialog window to apply changes.
7. In the Dashboard Edit mode, click the orange tick-mark at the right bottom of the page.

Now in the mobile mode, by clicking an action button, we will be directly transitioned to the needed widget where we can see the details of the entities of the main widget.

{% include images-gallery.html imageCollection="mob-layout-2" %}


#### Open in a separate dialog

[Coming soon]


#### Set entity from widget

[Coming soon]
